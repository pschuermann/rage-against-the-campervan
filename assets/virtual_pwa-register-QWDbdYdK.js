import{_ as m}from"./index-Bnabyev7.js";function h(l={}){const{immediate:c=!1,onNeedRefresh:g,onOfflineReady:r,onRegistered:f,onRegisteredSW:a,onRegisterError:n}=l;let t,s,o;const p=async(e=!0)=>{await s,o?.()};async function u(){if("serviceWorker"in navigator){if(t=await m(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/rage-against-the-campervan/sw.js",{scope:"/rage-against-the-campervan/",type:"classic"})).catch(e=>{n?.(e)}),!t)return;o=()=>{t?.messageSkipWaiting()};{let e=!1;const d=()=>{e=!0,t?.addEventListener("controlling",i=>{i.isUpdate&&window.location.reload()}),g?.()};t.addEventListener("installed",i=>{typeof i.isUpdate>"u"?typeof i.isExternal<"u"&&i.isExternal?d():!e&&r?.():i.isUpdate||r?.()}),t.addEventListener("waiting",d)}t.register({immediate:c}).then(e=>{a?a("/rage-against-the-campervan/sw.js",e):f?.(e)}).catch(e=>{n?.(e)})}}return s=u(),p}export{h as registerSW};
